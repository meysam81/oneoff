---
import Container from '../ui/Container.astro';
import Icon from '../icons/index.astro';
import { getGitHubData } from '../../utils/github';
import {
  platformList,
  getAllInstallCommands,
  getAllTerminalTitles,
} from '../../utils/os-detect';
import InstallationTerminal from '../vue/InstallationTerminal.vue';

var { fullVersion } = await getGitHubData();
var platformCommands = getAllInstallCommands(fullVersion);
var terminalTitles = getAllTerminalTitles();
var platforms = platformList;
---

<section class="section bg-bg-secondary/30" id="installation">
  <Container size="xl">
    <div class="section-header px-2 sm:px-0">
      <h2 class="section-title text-2xl sm:text-3xl md:text-headline">Up and running in <span class="text-accent-primary">10 seconds</span></h2>
      <p class="section-subtitle text-sm sm:text-base">
        One command. No package managers. No containers. Just download and run.
      </p>
    </div>

    <div class="max-w-3xl mx-auto px-2 sm:px-0">
      <InstallationTerminal
        client:load
        platformCommands={platformCommands}
        terminalTitles={terminalTitles}
        platforms={platforms}
      />

      <div class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 text-xs sm:text-sm">
        <a
          href="https://github.com/meysam81/oneoff/releases"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-1.5 sm:gap-2 text-fg-secondary hover:text-accent-primary transition-colors"
        >
          <Icon name="external" size={14} class="sm:w-4 sm:h-4" />
          View all releases
        </a>
      </div>
    </div>
  </Container>
</section>
