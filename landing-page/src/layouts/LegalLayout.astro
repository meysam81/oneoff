---
import BaseLayout from './BaseLayout.astro';
import Container from '../components/ui/Container.astro';
import Icon from '../components/icons/index.astro';

interface Props {
  title: string;
  description?: string;
  lastUpdated?: string;
}

const {
  title,
  description = '',
  lastUpdated = new Date().toISOString().split('T')[0],
} = Astro.props;
---

<BaseLayout title={`${title} â€” OneOff`} description={description}>
  <header class="border-b border-border-subtle">
    <Container size="xl">
      <nav class="flex items-center justify-between h-16">
        <a href="/" class="flex items-center gap-2 text-fg-primary hover:text-accent-primary transition-colors">
          <Icon name="clock" size={24} />
          <span class="font-display font-semibold">OneOff</span>
        </a>
        <a href="/" class="text-fg-secondary hover:text-fg-primary transition-colors text-sm">
          Back to Home
        </a>
      </nav>
    </Container>
  </header>

  <main class="py-16 md:py-24">
    <Container size="md">
      <article class="prose prose-invert max-w-none">
        <header class="mb-12 pb-8 border-b border-border-subtle">
          <h1 class="text-headline font-display font-bold text-fg-primary mb-4">{title}</h1>
          <p class="text-fg-secondary">Last updated: {lastUpdated}</p>
        </header>

        <div class="legal-content">
          <slot />
        </div>
      </article>
    </Container>
  </main>

  <footer class="border-t border-border-subtle py-8">
    <Container size="xl">
      <div class="flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-fg-muted">
        <p>&copy; {new Date().getFullYear()} OneOff Contributors. Open source under Apache-2.0 License.</p>
        <div class="flex items-center gap-6">
          <a href="/terms" class="hover:text-fg-secondary transition-colors">Terms</a>
          <a href="/privacy" class="hover:text-fg-secondary transition-colors">Privacy</a>
          <a href="https://github.com/meysam81/oneoff" target="_blank" rel="noopener noreferrer" class="hover:text-fg-secondary transition-colors">
            <Icon name="github" size={20} />
          </a>
        </div>
      </div>
    </Container>
  </footer>
</BaseLayout>

<style>
  .legal-content :global(h2) {
    @apply text-title font-display font-semibold text-fg-primary mt-10 mb-4;
  }

  .legal-content :global(h3) {
    @apply text-lg font-semibold text-fg-primary mt-8 mb-3;
  }

  .legal-content :global(p) {
    @apply text-fg-secondary leading-relaxed mb-4;
  }

  .legal-content :global(ul) {
    @apply list-disc list-inside text-fg-secondary mb-4 space-y-2;
  }

  .legal-content :global(ol) {
    @apply list-decimal list-inside text-fg-secondary mb-4 space-y-2;
  }

  .legal-content :global(li) {
    @apply leading-relaxed;
  }

  .legal-content :global(strong) {
    @apply text-fg-primary font-medium;
  }

  .legal-content :global(a) {
    @apply text-accent-primary hover:text-accent-secondary underline underline-offset-2 transition-colors;
  }

  .legal-content :global(code) {
    @apply bg-bg-tertiary px-1.5 py-0.5 rounded text-sm font-mono text-accent-primary;
  }
</style>
